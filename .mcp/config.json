{
  "version": "1.0",
  "name": "AwaOS MCP Configuration",
  "description": "Model Context Protocol servers for The Awa Network",
  "servers": {
    "kitenga_whiro": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "kaitiaki/kitenga_codex/start_kitenga.py"],
      "environment": {
        "DOTENV_PATH": ".env.kitenga_whiro",
        "KITENGA_ASSISTANT_ID": "${KITENGA_ASSISTANT_ID}",
        "OPENAI_VECTOR_STORE_ID": "${KITENGA_VECTOR_STORE_ID}",
        "OPENAI_API_KEY": "${OPENAI_API_KEY}",
        "SUPABASE_URL": "${SUPABASE_URL}",
        "SUPABASE_SERVICE_ROLE_KEY": "${SUPABASE_SERVICE_ROLE_KEY}",
        "MCP_PORT": "39285"
      },
      "description": "Kitenga Whiro - Oracle Kaitiaki: taonga watcher, summariser, translator, logger"
    },
    "tepo": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "-m", "mcp.tepo_server.server"],
      "environment": {
        "TE_PO_BASE_URL": "http://localhost:8000",
        "PIPELINE_TOKEN": "${PIPELINE_TOKEN}"
      },
      "description": "Te Pō MCP Server - Vector memory, pipelines, kaitiaki tasks"
    },
    "supabase": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "-m", "mcp.supabase_server.server"],
      "environment": {
        "SUPABASE_URL": "${SUPABASE_URL}",
        "SUPABASE_SERVICE_ROLE_KEY": "${SUPABASE_SERVICE_ROLE_KEY}"
      },
      "description": "Supabase MCP Server - Database queries, schema inspection"
    },
    "git": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "-m", "mcp.git_server.server"],
      "environment": {
        "GITHUB_TOKEN": "${GITHUB_TOKEN}",
        "GIT_USER_NAME": "AwaOS",
        "GIT_USER_EMAIL": "awaos@local"
      },
      "description": "Git/GitHub MCP Server - Versioning, PR creation"
    },
    "cloudflare": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "-m", "mcp.cloudflare_server.server"],
      "environment": {
        "CLOUDFLARE_API_TOKEN": "${CLOUDFLARE_API_TOKEN}",
        "CLOUDFLARE_ACCOUNT_ID": "${CLOUDFLARE_ACCOUNT_ID}"
      },
      "description": "Cloudflare MCP Server - Deploy Te Ao frontend"
    },
    "render": {
      "type": "python",
      "command": "/usr/bin/env",
      "args": ["python3", "-m", "mcp.render_server.server"],
      "environment": {
        "RENDER_API_KEY": "${RENDER_API_KEY}"
      },
      "description": "Render MCP Server - Deploy Te Pō/Hau backends"
    }
  },
  "tools": {
    "kitenga_whiro": [
      "supabase_search",
      "supabase_insert",
      "read_file",
      "list_files",
      "kitenga_whisper",
      "assistant_run",
      "kitenga_vision_ocr",
      "ocr_tool",
      "translate_tool",
      "summarise_text",
      "enhanced_web_search",
      "vector_save",
      "pipeline_run",
      "chat_save_session",
      "generate_trade_me_listing",
      "vector_batch_status"
    ],
    "tepo": [
      "vector_search",
      "vector_store",
      "run_pipeline",
      "kaitiaki_register",
      "kaitiaki_execute_task",
      "kaitiaki_context",
      "log_activity",
      "notify",
      "get_te_po_status",
      "list_pipelines",
      "list_kaitiaki"
    ],
    "supabase": [
      "sql_query",
      "schema_inspect",
      "list_tables",
      "get_table_info",
      "propose_migration",
      "check_rls"
    ],
    "git": [
      "init",
      "commit_push",
      "status",
      "log",
      "branch",
      "checkout",
      "tag",
      "rollback",
      "remote_add",
      "github_create_repo",
      "github_list_repos",
      "github_create_release"
    ],
    "cloudflare": [
      "deploy_pages",
      "set_env_var",
      "add_custom_domain",
      "list_deployments"
    ],
    "render": [
      "deploy_service",
      "get_service_status",
      "set_env_var",
      "list_services"
    ]
  },
  "workflows": {
    "deploy_all": {
      "description": "Deploy entire system",
      "steps": [
        {"server": "git", "tool": "git_tag", "params": {"tag": "v{version}"}},
        {"server": "tepo", "tool": "log_activity", "params": {"event_type": "deployment_start"}},
        {"server": "render", "tool": "deploy_service", "params": {"service": "te-po"}},
        {"server": "render", "tool": "deploy_service", "params": {"service": "te-hau"}},
        {"server": "cloudflare", "tool": "deploy_pages", "params": {"project": "te-ao"}},
        {"server": "tepo", "tool": "log_activity", "params": {"event_type": "deployment_complete"}}
      ]
    },
    "process_document": {
      "description": "Process and index a document",
      "steps": [
        {"server": "tepo", "tool": "run_pipeline", "params": {"name": "ocr"}},
        {"server": "tepo", "tool": "run_pipeline", "params": {"name": "summarise"}},
        {"server": "tepo", "tool": "run_pipeline", "params": {"name": "embed"}},
        {"server": "tepo", "tool": "vector_store"}
      ]
    },
    "query_knowledge_base": {
      "description": "Search and retrieve from knowledge base",
      "steps": [
        {"server": "tepo", "tool": "vector_search"},
        {"server": "supabase", "tool": "sql_query"}
      ]
    }
  },
  "activation_checklist": {
    "environment": [
      "TE_PO_BASE_URL=http://localhost:8010",
      "PIPELINE_TOKEN=<your_token>",
      "SUPABASE_URL=<your_url>",
      "SUPABASE_SERVICE_ROLE_KEY=<your_key>",
      "CLOUDFLARE_API_TOKEN=<your_token>",
      "CLOUDFLARE_ACCOUNT_ID=<your_id>",
      "RENDER_API_KEY=<your_key>",
      "GITHUB_TOKEN=<your_token>"
    ],
    "startup": [
      "Start Te Pō: docker-compose up te_po",
      "Verify health: curl http://localhost:8010/env/health",
      "Test Te Pō MCP: python -m mcp.tepo_server.server --help",
      "Test Supabase MCP: python -m mcp.supabase_server.server --help"
    ],
    "ide_integration": [
      "Configure VS Code: See MCP_SETUP.md",
      "Or Claude Desktop: See MCP_SETUP.md",
      "Or Cline: Enable MCP in settings",
      "Test first tool: vector_search"
    ]
  }
}
