{
    "name": "tepo",
    "version": "1.0.0",
    "description": "Te Pō Backend Service Schema",
    "baseUrl": "${TE_PO_BASE_URL}",
    "timeoutSeconds": 60,
    "services": {
        "core": {
            "routes": [
                "/",
                "/heartbeat",
                "/status"
            ],
            "description": "System health and status endpoints"
        },
        "kitenga": {
            "routes": [
                "/kitenga/gpt-whisper",
                "/kitenga/ask",
                "/kitenga/cards/scan",
                "/kitenga/tool/ocr",
                "/kitenga/tool/vision-ocr",
                "/kitenga/tool/translate",
                "/kitenga/query_knowledge_base",
                "/kitenga/run_pipeline"
            ],
            "description": "Kitenga AI processing and knowledge endpoints"
        },
        "vector": {
            "routes": [
                "/vector/embed",
                "/vector/search",
                "/vector/retrieval-test",
                "/vector/recent",
                "/vector/batch-status"
            ],
            "description": "Vector embeddings and semantic search"
        },
        "intake": {
            "routes": [
                "/intake/ocr",
                "/intake/summarize"
            ],
            "description": "Document intake and processing"
        },
        "ocr": {
            "routes": [
                "/ocr/scan",
                "/ocr/batch"
            ],
            "description": "OCR document scanning"
        },
        "reo": {
            "routes": [
                "/reo/translate",
                "/reo/explain",
                "/reo/pronounce"
            ],
            "description": "Māori language tools"
        },
        "pipeline": {
            "routes": [
                "/pipeline/run",
                "/pipeline/status",
                "/pipeline/config"
            ],
            "description": "Data processing pipelines"
        },
        "awa_protocol": {
            "routes": [
                "/awa/route",
                "/awa/wrap",
                "/awa/envelope",
                "/awa/handoff",
                "/awa/kaitiaki",
                "/awa/kaitiaki/context",
                "/awa/kaitiaki/register",
                "/awa/task",
                "/awa/memory/store",
                "/awa/memory/query",
                "/awa/vector/embed",
                "/awa/vector/search",
                "/awa/pipeline",
                "/awa/log",
                "/awa/notify"
            ],
            "description": "Inter-service protocol and message routing"
        },
        "database": {
            "routes": [
                "/kitenga/db/chat/history/{session_id}",
                "/kitenga/db/chat/log",
                "/kitenga/db/logs",
                "/kitenga/db/logs/recent",
                "/kitenga/db/memory",
                "/kitenga/db/memory/search",
                "/kitenga/db/pipeline/recent",
                "/kitenga/db/stats",
                "/kitenga/db/status",
                "/kitenga/db/taonga",
                "/kitenga/db/taonga/search",
                "/kitenga/db/taonga/{taonga_id}",
                "/kitenga/db/whakapapa"
            ],
            "description": "Knowledge base, memory, and metadata storage"
        },
        "state": {
            "routes": [
                "/state/current",
                "/state/update",
                "/state/history"
            ],
            "description": "State synchronization and management"
        },
        "assistants": {
            "routes": [
                "/assistant/create",
                "/assistant/list",
                "/assistant/run",
                "/assistant/vector-stores",
                "/assistants/profiles"
            ],
            "description": "OpenAI Assistant management"
        },
        "cards": {
            "routes": [
                "/cards/scan-image",
                "/cards/upload-image",
                "/cards/value",
                "/cards/estimate-value",
                "/cards/build-row",
                "/cards/build-csv"
            ],
            "description": "Trading card processing and valuation"
        },
        "research": {
            "routes": [
                "/research/analyze",
                "/research/status",
                "/research/save"
            ],
            "description": "Research and analysis tools"
        },
        "dev": {
            "routes": [
                "/dev/health",
                "/dev/test",
                "/dev/logs",
                "/dev/routes",
                "/dev/openai",
                "/dev/ollama",
                "/dev/ocr",
                "/dev/summarise"
            ],
            "description": "Development and debugging endpoints"
        }
    },
    "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
            "endpoint": {
                "type": "string",
                "description": "API endpoint to call (e.g., /kitenga/gpt-whisper)"
            },
            "method": {
                "type": "string",
                "enum": [
                    "GET",
                    "POST",
                    "PUT",
                    "DELETE",
                    "PATCH"
                ],
                "description": "HTTP method"
            },
            "payload": {
                "type": "object",
                "description": "Request body (for POST/PUT)"
            },
            "query": {
                "type": "object",
                "description": "Query parameters"
            },
            "headers": {
                "type": "object",
                "description": "Custom headers"
            }
        },
        "required": [
            "endpoint",
            "method"
        ]
    },
    "outputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
            "status": {
                "type": "integer",
                "description": "HTTP status code"
            },
            "data": {
                "type": "object",
                "description": "Response data"
            },
            "error": {
                "type": "string",
                "description": "Error message if applicable"
            },
            "timing": {
                "type": "object",
                "properties": {
                    "duration_ms": {
                        "type": "number"
                    },
                    "timestamp": {
                        "type": "string"
                    }
                }
            }
        }
    },
    "authConfig": {
        "type": "bearer",
        "tokenEnv": "TE_PO_AUTH_TOKEN",
        "optional": true
    }
}