# MCP Services Continue IDE Configuration
# ========================================
# Add this to ~/.continue/config.yaml to enable all MCP servers

mcpServers:
  # Te Pō Backend Service (all Te Pō routes, pipelines, vectors)
  tepo:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/tepo/server.py"]
    env:
      TE_PO_BASE_URL: "${TE_PO_BASE_URL:http://localhost:8010}"
      TE_PO_AUTH_TOKEN: "${TE_PO_AUTH_TOKEN:}"
      TE_PO_TIMEOUT: "60"

  # GitHub Integration
  git:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/git/server.py"]
    env:
      GITHUB_TOKEN: "${GITHUB_TOKEN}"

  # Render Deployment Service
  render:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/render/server.py"]
    env:
      RENDER_API_KEY: "${RENDER_API_KEY}"

  # Supabase Database Service
  supabase:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/supabase/server.py"]
    env:
      SUPABASE_URL: "${SUPABASE_URL}"
      SUPABASE_KEY: "${SUPABASE_KEY}"

  # OpenAI Responses API
  openai:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/openai/server.py"]
    env:
      OPENAI_API_KEY: "${OPENAI_API_KEY}"
      OPENAI_BASE_URL: "${OPENAI_BASE_URL:https://api.openai.com/v1}"
      OPENAI_DEFAULT_MODEL: "${OPENAI_DEFAULT_MODEL:gpt-5}"

  # Cloudflare Pages Service
  cloudflare:
    command: python3
    args: ["${WORKSPACE_DIR}/kitenga_mcp/cloudflare/server.py"]
    env:
      CLOUDFLARE_API_TOKEN: "${CLOUDFLARE_API_TOKEN}"
      CLOUDFLARE_ACCOUNT_ID: "${CLOUDFLARE_ACCOUNT_ID}"

# Optional: Cloudflare (add when ready)
# cloudflare:
#   command: python
#   args: ["${WORKSPACE_DIR}/mcp_services/cloudflare/server.py"]
#   env:
#     CLOUDFLARE_API_KEY: "${CLOUDFLARE_API_KEY}"

# Tool definitions
tools:
  # Te Pō tools
  - name: tepo_kitenga_whisper
    category: chat
    mcp: tepo

  - name: tepo_vector_search
    category: knowledge
    mcp: tepo

  - name: tepo_ocr_scan
    category: processing
    mcp: tepo

  - name: tepo_pipeline_run
    category: processing
    mcp: tepo

  - name: tepo_memory_store
    category: memory
    mcp: tepo

  - name: tepo_memory_query
    category: memory
    mcp: tepo

  # Git tools
  - name: git_repo_info
    category: repository
    mcp: git

  - name: git_list_branches
    category: branches
    mcp: git

  - name: git_create_branch
    category: branches
    mcp: git

  - name: git_list_commits
    category: commits
    mcp: git

  - name: git_create_file
    category: files
    mcp: git

  - name: git_update_file
    category: files
    mcp: git

  - name: git_create_pull_request
    category: pull_requests
    mcp: git

  - name: git_list_issues
    category: issues
    mcp: git

  # Render tools
  - name: render_list_services
    category: deployment
    mcp: render

  - name: render_deploy
    category: deployment
    mcp: render

  - name: render_list_deploys
    category: deployment
    mcp: render

  - name: render_scale_service
    category: deployment
    mcp: render

  # Supabase tools
  - name: supabase_select
    category: database
    mcp: supabase

  - name: supabase_insert
    category: database
    mcp: supabase

  - name: supabase_update
    category: database
    mcp: supabase

  - name: supabase_rpc
    category: database
    mcp: supabase

  # OpenAI tools
  - name: responses_generate
    category: responses
    mcp: openai

  - name: responses_get
    category: responses
    mcp: openai

  # Cloudflare tools
  - name: deploy_pages
    category: pages
    mcp: cloudflare

  - name: deploy_te_ao
    category: pages
    mcp: cloudflare

  - name: create_project
    category: projects
    mcp: cloudflare

  - name: list_projects
    category: projects
    mcp: cloudflare

  - name: get_project
    category: projects
    mcp: cloudflare

  - name: set_env_vars
    category: projects
    mcp: cloudflare

  - name: list_deployments
    category: deployments
    mcp: cloudflare

  - name: add_custom_domain
    category: domains
    mcp: cloudflare

  - name: purge_cache
    category: cache
    mcp: cloudflare

# Context settings
context:
  # Keep permanent schema in memory (prevents context drops)
  - name: "mcp_schemas"
    description: "MCP service schemas"
    paths:
      - "kitenga_mcp/tepo/schema.json"
      - "kitenga_mcp/git/schema.json"
      - "kitenga_mcp/render/schema.json"
      - "kitenga_mcp/supabase/schema.json"
      - "kitenga_mcp/openai/schema.json"
      - "kitenga_mcp/cloudflare/schema.json"
